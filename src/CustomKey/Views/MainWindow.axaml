<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CustomKey.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="860" d:DesignHeight="345"
		xmlns:ui="using:FluentAvalonia.UI.Controls"
        x:Class="CustomKey.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        WindowStartupLocation="CenterScreen"
        MinHeight="320" MinWidth="860" Height="320" Width="860" Topmost="True"
        Title="CustomKey"
        TransparencyLevelHint="AcrylicBlur"
		Background="{DynamicResource RegionColor}"
        ExtendClientAreaToDecorationsHint="True" ExtendClientAreaChromeHints="PreferSystemChrome" ExtendClientAreaTitleBarHeightHint="30">

	<Design.DataContext>
		<vm:MainWindowViewModel/>
	</Design.DataContext>
	
	<Grid>
		<!-- Image de fond -->
		<Image Source="avares://CustomKey/Assets/background/red.jpg"
		       Stretch="UniformToFill"
		       IsHitTestVisible="False"
		       x:Name="BackgroundImage"/>
		<!-- Custom Title Bar doesn't work on Linux -->
		<StackPanel Orientation="Vertical" Margin="{OnPlatform Default='0,25,0,0', Linux='0,0,0,0'}">
			<!-- Top Bar with rounded corners and margin -->
			<Border Background="{DynamicResource ButtonBackgroundLow}"
	                Margin="15,5"
	                CornerRadius="15"
	                HorizontalAlignment="Stretch"
	                Height="42">
				<!-- Grid to organize the layout -->
				<Grid VerticalAlignment="Center">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto"/>
					</Grid.ColumnDefinitions>

					<!-- Image and TextBlock in the first column -->
					<StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center" Margin="6" ToolTip.Tip="{Binding VersionNumber}">
						<Image Source="avares://CustomKey/CustomKey.ico" Height="30"/>
						<TextBlock Text="CustomKey" Margin="5" FontWeight="Bold" FontSize="15"/>
					</StackPanel>

					<!-- ComboBox in the center column -->
					<ComboBox Width="200" Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center" MaxDropDownHeight="200" Height="32" ItemsSource="{Binding LayoutNames}" SelectedItem="{Binding SelectedLayout}"/>
					
					<!-- Button in the third column -->
					<StackPanel Orientation="Horizontal" Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0">
						<Button x:Name="settingsButton" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="Settings"/>
								<TextBlock FontFamily="{StaticResource SymbolThemeFontFamily}" Text="&#xF8B0;" Margin="2"/>
							</StackPanel>
						</Button>
						<TextBlock x:Name="aboutIco" FontFamily="{StaticResource SymbolThemeFontFamily}" Text="&#xF167;" Margin="8,0" VerticalAlignment="Center" Cursor="Hand" FontSize="22" ToolTip.Tip="About"/>
					</StackPanel>
				</Grid>
			</Border>
			
			<!-- Virtual Keyboard -->
			<StackPanel Orientation="Vertical" Margin="0" Width="860">
				<!-- Row 1 -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0">
					<Button Width="30" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key1]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key1Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key2]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key2Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key3]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key3Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key4]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key4Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key5]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key5Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key6]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key6Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key7]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key7Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key8]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key8Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key9]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key9Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key10]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key10Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key11]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key11Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key12]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key12Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key13]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key13Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Content="Backspc" Width="82" Height="45" Margin="3" VerticalContentAlignment="Center"/>
				</StackPanel>

				<!-- Row 2 -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0">
					<Button Content="tab" Width="63" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key14]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key14Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key15]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key15Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key16]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key16Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key17]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key17Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key18]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key18Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key19]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key19Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key20]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key20Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key21]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key21Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key22]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key22Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key23]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key23Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="46" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key24]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key24Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="46" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key25]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key25Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="46" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key26]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key26Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
				</StackPanel>

				<!-- Row 3 -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0">
					<Button Content="Caps" Width="75" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key27]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key27Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key28]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key28Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key29]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key29Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key30]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key30Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key31]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key31Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key32]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key32Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key33]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key33Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key34]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key34Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key35]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key35Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key36]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key36Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key37]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key37Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Content="Enter" Width="87" Height="45" Margin="3" VerticalContentAlignment="Center"/>
				</StackPanel>

				<!-- Row 4 -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0">
					<Button Content="Shift" Width="100" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key38]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key38Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key39]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key39Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key40]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key40Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key41]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key41Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key42]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key42Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key43]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key43Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key44]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key44Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key45]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key45Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key46]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key46Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Width="45" Height="45" Margin="3">
						<Grid>
							<TextBlock Text="{Binding [Key47]}" FontSize="15" VerticalAlignment="Center" HorizontalAlignment="Center" />
							<TextBlock Text="{Binding [Key47Shift]}" FontSize="10" VerticalAlignment="Top" HorizontalAlignment="Left"/>
						</Grid>
					</Button>
					<Button Content="Shift" Width="113" Height="45" Margin="3" VerticalContentAlignment="Center"/>
				</StackPanel>

				<!-- Row 5 -->
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,3">
					<Button Content="Ctrl" Width="85" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Content="Alt" Width="65" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Content=" " Width="393" Height="45" Margin="3" />
					<Button Content="Alt Gr" Width="65" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Content="⮜" Width="45" Height="45" Margin="3" VerticalContentAlignment="Center"/>
					<Button Content="⮞" Width="45" Height="45" Margin="3" VerticalContentAlignment="Center"/>
				</StackPanel>
			</StackPanel>
			<TextBox Width="727" MaxHeight="55" AcceptsReturn="True" TextWrapping="Wrap"/>
		</StackPanel>
	</Grid>
</Window>

